<div class="container-fluid py-4">
  <div class="row">
    <div class="col-lg-8 mx-auto">
      <div class="card border-0 shadow-sm">
        <div class="card-header bg-transparent border-0">
          <h5 class="card-title mb-0">Create Leave Request</h5>
        </div>
        <div class="card-body">
          <form [formGroup]="leaveForm" (ngSubmit)="onSubmit()">
            <!-- Leave Type -->
            <div class="mb-3">
              <label for="leaveType" class="form-label">Leave Type <span class="text-danger">*</span></label>
              <select 
                class="form-select" 
                id="leaveType" 
                formControlName="leaveType"
                [class.is-invalid]="leaveForm.get('leaveType')?.invalid && leaveForm.get('leaveType')?.touched">
                <option value="">Select leave type</option>
                <option *ngFor="let type of leaveTypes" [value]="type.value">{{ type.label }}</option>
              </select>
              <div class="invalid-feedback" *ngIf="leaveForm.get('leaveType')?.invalid && leaveForm.get('leaveType')?.touched">
                Please select a leave type.
              </div>
            </div>

            <!-- Date Range -->
            <div class="row">
              <div class="col-md-6">
                <div class="mb-3">
                  <label for="startDate" class="form-label">Start Date <span class="text-danger">*</span></label>
                  <input 
                    type="date" 
                    class="form-control" 
                    id="startDate" 
                    formControlName="startDate"
                    [class.is-invalid]="leaveForm.get('startDate')?.invalid && leaveForm.get('startDate')?.touched">
                  <div class="invalid-feedback" *ngIf="leaveForm.get('startDate')?.invalid && leaveForm.get('startDate')?.touched">
                    <div *ngIf="leaveForm.get('startDate')?.errors?.['required']">Start date is required.</div>
                    <div *ngIf="leaveForm.get('startDate')?.errors?.['pastDate']">Start date cannot be in the past.</div>
                  </div>
                </div>
              </div>
              <div class="col-md-6">
                <div class="mb-3">
                  <label for="endDate" class="form-label">End Date <span class="text-danger">*</span></label>
                  <input 
                    type="date" 
                    class="form-control" 
                    id="endDate" 
                    formControlName="endDate"
                    [class.is-invalid]="leaveForm.get('endDate')?.invalid && leaveForm.get('endDate')?.touched">
                  <div class="invalid-feedback" *ngIf="leaveForm.get('endDate')?.invalid && leaveForm.get('endDate')?.touched">
                    <div *ngIf="leaveForm.get('endDate')?.errors?.['required']">End date is required.</div>
                    <div *ngIf="leaveForm.get('endDate')?.errors?.['beforeStart']">End date must be after start date.</div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Workdays Display -->
            <div class="mb-3" *ngIf="workdays > 0">
              <div class="alert alert-info">
                <i class="fas fa-info-circle me-2"></i>
                This request is for <strong>{{ workdays }}</strong> working day(s).
              </div>
            </div>

            <!-- Reason -->
            <div class="mb-3">
              <label for="reason" class="form-label">Reason <span class="text-danger">*</span></label>
              <textarea 
                class="form-control" 
                id="reason" 
                rows="3" 
                formControlName="reason"
                placeholder="Please provide a reason for your leave request"
                [class.is-invalid]="leaveForm.get('reason')?.invalid && leaveForm.get('reason')?.touched"></textarea>
              <div class="invalid-feedback" *ngIf="leaveForm.get('reason')?.invalid && leaveForm.get('reason')?.touched">
                Please provide a reason for your leave request.
              </div>
            </div>

            <!-- Error Display -->
            <div class="alert alert-danger" *ngIf="errorMessage">
              <i class="fas fa-exclamation-triangle me-2"></i>
              {{ errorMessage }}
            </div>

            <!-- Submit Buttons -->
            <div class="d-flex gap-2">
              <button 
                type="submit" 
                class="btn btn-primary"
                [disabled]="leaveForm.invalid || isSubmitting">
                <span *ngIf="isSubmitting" class="spinner-border spinner-border-sm me-2" role="status"></span>
                <i *ngIf="!isSubmitting" class="fas fa-paper-plane me-2"></i>
                {{ isSubmitting ? 'Submitting...' : 'Submit Request' }}
              </button>
              <button 
                type="button" 
                class="btn btn-outline-secondary"
                (click)="onCancel()"
                [disabled]="isSubmitting">
                <i class="fas fa-times me-2"></i>
                Cancel
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>